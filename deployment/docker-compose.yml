version: '3.8'

services:
  app:
    build:
      context: ..
      dockerfile: deployment/Dockerfile
    container_name: ios-xe-upgrade-manager
    ports:
      - "5000:5000"
      - "80:80"
    restart: unless-stopped
    # Persist data using named volumes instead of bind mounts
    volumes:
      - ios-xe-db:/app/app/database
      - ios-xe-repo:/app/app/repo
      - ios-xe-logs:/app/app/logs

volumes:
  ios-xe-db:
  ios-xe-repo:
  ios-xe-logs:
